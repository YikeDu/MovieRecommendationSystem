(function(t){function e(e){for(var i,a,o=e[0],l=e[1],c=e[2],m=0,p=[];m<o.length;m++)a=o[m],Object.prototype.hasOwnProperty.call(r,a)&&r[a]&&p.push(r[a][0]),r[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),s()}function s(){for(var t,e=0;e<n.length;e++){for(var s=n[e],i=!0,o=1;o<s.length;o++){var l=s[o];0!==r[l]&&(i=!1)}i&&(n.splice(e--,1),t=a(a.s=s[0]))}return t}var i={},r={app:0},n=[];function a(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=i,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var u=l;n.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0390":function(t,e,s){"use strict";s("b52f")},"1e29":function(t,e,s){"use strict";s("27bf")},"27bf":function(t,e,s){},3080:function(t,e,s){"use strict";s("bc9c")},"359b":function(t,e,s){},"4ce4":function(t,e,s){},"56d7":function(t,e,s){"use strict";s.r(e);s("cadf"),s("551c"),s("f751"),s("097d");var i=s("2b0e"),r=function(){var t=this,e=t._self._c;return e("el-container",{staticClass:"app"},[e("el-header",[e("Header")],1),e("router-view",{staticClass:"view"}),e("el-footer")],1)},n=[],a=function(){var t=this,e=t._self._c;return e("el-row",{attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{attrs:{span:15}},[e("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,router:!0,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[e("el-menu-item",{attrs:{index:"/"},on:{click:t.send}},[t._v(" Home")])],1)],1),e("el-col",{attrs:{span:3}},[t.isLogin?e("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,router:!0,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}}):e("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,router:!0,mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[e("el-menu-item",{attrs:{index:"/signup"}},[t._v("Signup")]),e("el-menu-item",{attrs:{index:"/login"}},[t._v("Login")]),e("el-submenu",{attrs:{index:"1"}},[e("template",{slot:"title"},[e("i",{staticClass:"el-icon-s-tools",staticStyle:{color:"aliceblue","margin-left":"-2px"}})]),e("el-menu-item",{attrs:{index:"1-1",disabled:""}},[t._v(t._s(t.email))]),e("el-menu-item",{on:{click:t.seting}},[t._v("SETTINGS")]),e("el-menu-item",{on:{click:t.exit}},[t._v("SIGN OUT")])],2)],1),e("el-menu")],1)],1)},o=[],l=(s("96cf"),s("1da1")),c=new i["default"],u={data:function(){return{email:"Not logged in"}},computed:{activeIndex:function(){return this.$route.path},isLogin:function(){return this.$store.getters.getIsLogin},user:function(){return this.$store.getters.getUser}},mounted:function(){localStorage.getItem("user")},created:function(){var t=this;c.$on("login",(function(e){console.log("login",e),t.email=e.email})),c.$on("Update",(function(e){t.email="Not logged in"})),this.se()},methods:{se:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(),e=window.sessionStorage.getItem("email"),e&&(this.email=e);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),seting:function(){"Not logged in"!=this.email?this.$router.push("/change"):this.$message.error("Please log in your account before you can access the Settings page!")},exit:function(){this.email="Not logged in",this.$message.success("Your account has been logged out!"),window.sessionStorage.clear(),this.$router.push("/login")},logout:function(){this.$store.dispatch("logout"),this.$router.push("/login")},send:function(){c.$emit("home","home")}}},m=u,p=(s("e644"),s("2877")),d=Object(p["a"])(m,a,o,!1,null,"006f5796",null),f=d.exports,g={name:"App",components:{Header:f}},h=g,v=(s("3080"),Object(p["a"])(h,r,n,!1,null,"5612fab3",null)),b=v.exports,y=s("8c4f"),x=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Box"},[e("div",{staticClass:"category"},[e("div",{staticClass:"hn"},[e("span",{staticStyle:{"font-size":"1.5rem","margin-right":"100px"},on:{click:t.category_rightf}},[t._v("Genre of film")]),t.category_right_status?e("i",{staticClass:"el-icon-arrow-down",on:{click:t.category_rightf}}):e("i",{staticClass:"el-icon-arrow-up",on:{click:t.category_rightf}}),e("div",{staticClass:"box_fq"},[t.category_right_status?e("div",{staticClass:"box_son"},[e("el-card",{staticClass:"box-card",staticStyle:{width:"267px"}},t._l(t.mtypeArry,(function(s){return e("div",{key:s,staticClass:"mtype"},[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.mtypef(s)}}},[t._v(" "+t._s(s))])],1)})),0)],1):t._e()])]),e("div",{staticClass:"hn wd"},[e("el-button",{attrs:{type:"text"},on:{click:t.youlike}},[t._v(" movies you've rated")])],1)]),t.statusl?e("div",{staticClass:"content"},[e("div",{staticStyle:{color:"#0CDAEB","font-size":"1.2rem","margin-bottom":"10px"}},[t._v(t._s(t.liketitle))]),t._l(t.tj,(function(s){return e("div",{key:s.id,staticClass:"content_movie",attrs:{index:s.id},on:{click:function(e){return t.omovie(s)}}},[e("div",{staticStyle:{width:"156px",height:"270px"}},[e("el-image",{staticStyle:{width:"156px",height:"228px"},attrs:{src:s.imageSrc1,fit:t.fit}}),e("div",{staticStyle:{width:"156px"}},[e("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(s.title))])]),e("div",{staticStyle:{width:"156px","margin-top":"15px",height:"15px"}},[e("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(s.year))])])],1)])}))],2):t._e(),t.statusl?e("div",{staticClass:"content"},[e("div",{staticStyle:{color:"#0CDAEB","font-size":"1.2rem","margin-bottom":"10px"}},[t._v("Weekly Trending")]),t._l(t.rm,(function(s){return e("div",{key:s.id,staticClass:"content_movie",attrs:{index:s.id},on:{click:function(e){return t.omovie(s)}}},[e("div",{staticStyle:{width:"156px","vertical-align":"middle",height:"270px"}},[e("el-image",{staticStyle:{width:"156px",height:"228px"},attrs:{src:s.imageSrc1,fit:t.fit}}),e("div",{staticStyle:{width:"156px","margin-bottom":"10px"}},[e("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(s.title))])]),e("div",{staticStyle:{width:"156px","margin-top":"15px",height:"15px"}},[e("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(s.year))])])],1)])}))],2):t._e(),t.statusl?e("div",{staticClass:"content"},[e("div",{staticStyle:{color:"#0CDAEB","font-size":"1.2rem","margin-bottom":"10px"}},[t._v("Top Rated")]),t._l(t.gf,(function(s){return e("div",{key:s.id,staticClass:"content_movie",attrs:{index:s.id},on:{click:function(e){return t.omovie(s)}}},[e("div",{staticStyle:{width:"156px"}},[e("el-image",{staticStyle:{width:"156px",height:"228px"},attrs:{src:s.imageSrc1,fit:t.fit}}),e("div",{staticStyle:{width:"156px","margin-bottom":"10px"}},[e("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(s.title))])]),e("div",{staticStyle:{width:"156px","margin-top":"15px",height:"15px"}},[e("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(s.year))])])],1)])}))],2):t._e(),t.status2?e("div",{staticClass:"content"},[t._l(t.lb,(function(s){return e("div",{key:s.id,staticClass:"content_movie",attrs:{index:s.id},on:{click:function(e){return t.omovie(s)}}},[e("div",{staticStyle:{width:"156px",height:"320px"}},[e("el-image",{staticStyle:{width:"156px",height:"228px"},attrs:{src:s.imageSrc1,fit:t.fit}}),e("div",{staticStyle:{width:"156px","margin-bottom":"10px",height:"30px"}},[e("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(s.title))])]),e("div",{staticStyle:{width:"156px","margin-top":"5px",height:"15px"}},[e("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(s.year))])])],1)])})),e("div",{staticClass:"block"},[e("span",{staticClass:"demonstration"}),e("el-pagination",{attrs:{"current-page":t.currentPage1,"page-size":21,layout:"total, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage1=e},"update:current-page":function(e){t.currentPage1=e}}})],1)],2):t._e()])},_=[],w={data:function(){return{liketitle:"Recommend",cid:"000",type:"no",sjs:"",iconColor:"#ffb24e",category_right_status:!1,movieList:[],rm:[],gf:[],tj:[],lb:[],pageSize:"",total:"",lbs:[],statusl:!0,status2:!1,mtypeArry:["Animation","Adventure","Children","Fantasy","Mystery","Thriller"]}},mounted:function(){this.init()},beforeDestroy:function(){this.send()},created:function(){var t=this;c.$on("home",(function(e){t.type="no",console.log("你的喜欢",e),t.statusl=!0,t.status2=!1}))},methods:{handleSizeChange:function(t){console.log("每页 ".concat(t," 条"))},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),t-=1,this.lb=this.lbs[t],console.log("当前页: ".concat(t))},init:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.cid=window.sessionStorage.getItem("uid"),t.next=3,this.$http.get("/api/ratings/getdata?type="+this.type+"&cid="+this.cid);case 3:e=t.sent,s=e.data,this.rm=s.obj.rm,this.gf=s.obj.gf,this.tj=s.obj.tj,this.liketitle=s.obj.title,this.type="no",this.status2=!1,this.statusl=!0,console.log(s);case 13:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),youlike:function(){var t=window.sessionStorage.getItem("token");if(console.log(t),!t)return this.$message.error("请先登录账号后才能看到你的历史打分!");this.$router.push("/like")},send:function(){c.$emit("xg",this.sjs)},omovie:function(t){this.sjs=t,this.$router.push("/mdetails")},category_rightf:function(){this.category_right_status=!this.category_right_status},mtypef:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.type=e,this.sleep(300),this.category_rightf(),this.statusl=!1,this.status2=!0,t.next=7,this.$http.get("/api/ratings/classification?type="+this.type);case 7:s=t.sent,i=s.data,this.lb=i.obj.sj[0],this.lbs=i.obj.sj,this.total=i.obj.cd;case 12:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),sleep:function(t){var e=new Date,s=e.getTime()+t;while(1)if(e=new Date,e.getTime()>s)return!0}}},S=w,k=(s("7148"),Object(p["a"])(S,x,_,!1,null,"677aa2e9",null)),j=k.exports,C=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("el-row",{attrs:{type:"flex",align:"center",justify:"center"}},[e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"User Name",prop:"username"}},[e("el-input",{model:{value:t.ruleForm.username,callback:function(e){t.$set(t.ruleForm,"username",e)},expression:"ruleForm.username"}})],1),e("el-form-item",{attrs:{label:"Password",prop:"password"}},[e("el-input",{attrs:{type:"password"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"success",round:""},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("Login")])],1),e("el-form-item",[e("el-button",{attrs:{type:"success",round:""},on:{click:function(e){return t.wjma()}}},[t._v("Forget your password")])],1)],1)],1)],1),e("div",[e("el-dialog",{attrs:{title:"Forget your password",visible:t.dialogVisible,width:"30%","before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm2,"status-icon":"","label-width":"100px"}},[e("el-form-item",{attrs:{label:"Account",prop:"pass"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.ruleForm2.zh,callback:function(e){t.$set(t.ruleForm2,"zh",e)},expression:"ruleForm2.zh"}})],1),e("el-form-item",{attrs:{label:"Email",prop:"pass"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.ruleForm2.mail,callback:function(e){t.$set(t.ruleForm2,"mail",e)},expression:"ruleForm2.mail"}})],1),e("el-form-item",{attrs:{label:"Password",prop:"pass"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.ruleForm2.ma,callback:function(e){t.$set(t.ruleForm2,"ma",e)},expression:"ruleForm2.ma"}})],1),e("el-form-item",{attrs:{label:"code",prop:"pass"}},[e("el-input",{attrs:{autocomplete:"off"},model:{value:t.ruleForm2.yzm,callback:function(e){t.$set(t.ruleForm2,"yzm",e)},expression:"ruleForm2.yzm"}})],1),e("el-form-item",[e("div",{staticStyle:{display:"flex"}},[e("el-button",{on:{click:function(e){return t.fsyzm()}}},[t._v("Verification code")]),e("el-button",{attrs:{type:"primary"},on:{click:t.xgma}},[t._v("Change password")])],1)])],1)],1)],1)])},$=[],F={name:"Login",data:function(){return{dialogVisible:!1,ruleForm2:{zh:"",mail:"",yzm:"",ma:""},ruleForm:{username:"",password:""},rules:{username:[{required:!0,message:"Please input username",trigger:"blur"},{min:4,max:32,message:"Length limited from 4 to 32 characters",trigger:"blur"}],password:[{required:!0,message:"Please input password",trigger:"blur"},{min:8,max:32,message:"Length limited from 8 to 32 characters",trigger:"blur"}]}}},methods:{fsyzm:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==this.ruleForm2.zh&&""!==this.ruleForm2.mail){t.next=4;break}this.$message.error("Please enter your account number and password"),t.next=9;break;case 4:return t.next=6,this.$http.post("./api/user/yzm",this.ruleForm2);case 6:e=t.sent,console.log("这里是打印",e),200==e.data.code?this.$message.success(e.data.message):this.$message.error(e.data.message);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),xgma:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==this.ruleForm2.zh&&""!==this.ruleForm2.mail&&""!==this.ruleForm2.yzm&&""!==this.ruleForm2.ma){t.next=4;break}this.$message.error("Please enter your account number and password"),t.next=9;break;case 4:return t.next=6,this.$http.post("./api/user/xgma",this.ruleForm2);case 6:e=t.sent,console.log("这里是打印",e),200==e.data.code?(this.$message.success("ok!The verification code is sent successfully. Procedure!"),this.$message.success(e.data.message)):this.$message.error(e.data.message);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),wjma:function(){this.dialogVisible=!0},submitForm:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this,console.log(this.ruleForm),t.next=4,this.$http.post("/api/user/login",this.ruleForm);case 4:s=t.sent,i=s.data,console.log("res",i),200==i.code?(window.sessionStorage.setItem("token",this.ruleForm.username),window.sessionStorage.setItem("user",JSON.stringify(i.obj)),window.sessionStorage.setItem("uid",JSON.stringify(i.obj.id)),window.sessionStorage.setItem("email",JSON.stringify(i.obj.email)),this.$message.success("login successfully"),c.$emit("login",i.obj),this.$router.push("/")):this.$message.error("The account or password is incorrect");case 8:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},z=F,O=(s("6d8a"),Object(p["a"])(z,C,$,!1,null,"e4127b94",null)),L=O.exports,R=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("el-row",{attrs:{type:"flex",align:"center",justify:"center"}},[e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"User Name",prop:"username"}},[e("el-input",{model:{value:t.ruleForm.username,callback:function(e){t.$set(t.ruleForm,"username",e)},expression:"ruleForm.username"}})],1),e("el-form-item",{attrs:{label:"Password",prop:"password"}},[e("el-input",{attrs:{type:"password"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),e("el-form-item",{attrs:{label:"Email",prop:"email"}},[e("el-input",{model:{value:t.ruleForm.email,callback:function(e){t.$set(t.ruleForm,"email",e)},expression:"ruleForm.email"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"success",round:""},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("Signup")])],1)],1)],1)],1)])},P=[],A=s("bc3a"),I=s.n(A),U={name:"Sign",data:function(){return{ruleForm:{username:"",email:"",password:""},rules:{username:[{required:!0,message:"Please input username",trigger:"blur"},{min:4,max:32,message:"Length limited from 4 to 32 characters",trigger:"blur"}],email:[{required:!0,message:"Please input email",trigger:"blur"},{pattern:/^[A-Za-z0-9\u4e00-\u9fa5]+@[a-zA-Z0-9_-]+(.[a-zA-Z0-9_-]+)+$/,message:"Mailbox format error",trigger:"blur"}],password:[{required:!0,message:"Please input password",trigger:"blur"},{min:4,max:32,message:"Length limited from 8 to 32 characters",trigger:"blur"}]}}},methods:{submitForm:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this,this.$refs[e].validate(function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var i,r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log("valid",e),!e){t.next=20;break}return s.ruleForm,t.next=5,s.$http.post("/api/user/checkUsername",s.ruleForm);case 5:if(i=t.sent,r=i.data,200!=r.code){t.next=19;break}return t.next=10,s.$http.post("/api/user/login",s.ruleForm);case 10:return n=t.sent,a=n.data,window.sessionStorage.setItem("token",s.ruleForm.username),window.sessionStorage.setItem("user",JSON.stringify(a.obj)),c.$emit("login",a.obj),s.$router.push("/like2"),t.abrupt("return",s.$message.success(r.message));case 19:s.$message.error(r.message);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 2:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},N=U,E=(s("8c8a"),Object(p["a"])(N,R,P,!1,null,"2c1e22c5",null)),T=E.exports,D=function(){var t=this,e=t._self._c;return e("el-row",{attrs:{type:"flex",align:"center",justify:"center"}},[e("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"Email",prop:"email"}},[e("el-input",{attrs:{placeholder:"Please input new email"},model:{value:t.ruleForm.email,callback:function(e){t.$set(t.ruleForm,"email",e)},expression:"ruleForm.email"}})],1),e("el-form-item",{attrs:{label:"Password",prop:"password"}},[e("el-input",{attrs:{type:"password",placeholder:"Input new password"},model:{value:t.ruleForm.password,callback:function(e){t.$set(t.ruleForm,"password",e)},expression:"ruleForm.password"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"success",round:""},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("Update")])],1)],1)],1)},q=[],M={name:"Setting",data:function(){var t=function(t,e,s){0==/^\w{1,64}@[a-z0-9\-]{1,256}(\.[a-z]{2,6}){1,2}$/i.test(e)&&s(new Error("Email format error")),I.a.post("/api/user/checkEmail?email="+e).then((function(t){0==t.data.code?s():s(new Error("Email already existed"))}))};return{ruleForm:{id:0,email:"",password:""},rules:{email:[{validator:t,trigger:"blur"},{required:!0,message:"Please input email",trigger:"blur"},{min:4,max:32,message:"Length limited from 4 to 64 characters",trigger:"blur"}],password:[{required:!0,message:"Please input password",trigger:"blur"},{min:8,max:32,message:"Length limited from 8 to 32 characters",trigger:"blur"}]}}},methods:{submitForm:function(t){console.log(t);var e=this,s=this.ruleForm;s.id=this.$store.getters.getUserId,this.$refs[t].validate((function(t){t&&I.a.post("/api/user/setting",s).then((function(t){console.log(t),0==t.data.code?(e.$message({message:"Update Success!",type:"success"}),e.$store.dispatch("login",t.data.data),e.$router.push({path:"/"})):e.$message({message:"Update Error!",type:"error"})}))}))}}},B=M,J=(s("0390"),Object(p["a"])(B,D,q,!1,null,"5740af4f",null)),Q=J.exports,W=function(){var t=this,e=t._self._c;return e("el-main",[e("el-row",{attrs:{type:"flex",align:"center",justify:"center"}},[e("el-col",{attrs:{span:18}},[e("el-alert",{attrs:{title:"Are you sure to logout?",type:"warning",effect:"dark"}})],1)],1),e("el-row",{attrs:{type:"flex",align:"center",justify:"center"}},[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.logout()}}},[t._v("Logout")])],1)],1)},Y=[],H={name:"Logout",methods:{logout:function(){this.$store.commit("cleanLoggedin")}}},V=H,G=Object(p["a"])(V,W,Y,!1,null,null,null),Z=G.exports,K=(s("7f7f"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"Box"},[e("div",{staticClass:"category"},[e("div",{staticClass:"box_white"},[e("div",[e("div",{staticClass:"hn"},[e("a",{attrs:{href:t.hearfs,target:"_blank"}},[e("el-image",{staticStyle:{width:"500px",height:"280px"},attrs:{src:t.sj.imageSrc2}})],1)]),e("div",{staticClass:"hn"},[e("div",{staticStyle:{"margin-bottom":"10px"}},[e("span",{staticStyle:{"font-size":"2rem"}},[t._v(t._s(t.sj.name))])]),e("div",{staticStyle:{"margin-top":"5px"}},[e("el-rate",{on:{change:t.starf},model:{value:t.star,callback:function(e){t.star=e},expression:"star"}})],1),e("div",[e("div",{staticStyle:{display:"inline-block","margin-right":"80px"}},[t._m(0),e("div",{staticStyle:{"margin-top":"10px"}},[e("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(t.sj.runtime))])])]),e("div",{staticStyle:{display:"inline-block","margin-right":"80px"}},[t._m(1),e("div",{staticStyle:{"margin-top":"10px"}},t._l(t.sj.mtypeLis,(function(s){return e("span",{key:s,staticStyle:{"font-size":"0.9rem",color:"#77b8e8"},attrs:{index:s}},[t._v(t._s(s)+"\n                ")])})),0)])]),e("div",{staticStyle:{"margin-top":"15px"}},[e("div",{staticStyle:{display:"inline-block","margin-right":"80px"}},[t._m(2),e("div",{staticStyle:{"margin-top":"10px"}},[e("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(t.sj.voteCount))])])]),t._m(3)])])])])]),e("div",{staticClass:"category_jj"},[t._v(t._s(t.sj.jj))]),e("div",{staticClass:"category_jj"},[e("div",{staticClass:"head"},[e("div",{staticStyle:{"font-size":"20px",position:"absolute",top:"15px",left:"2px"}},[t._v(t._s(this.cid)+":")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.firstComments,expression:"firstComments"}],staticStyle:{"margin-left":"25px"},attrs:{type:"text",placeholder:"Please enter a comment.."},domProps:{value:t.firstComments},on:{input:function(e){e.target.composing||(t.firstComments=e.target.value)}}}),e("button",{on:{click:t.sumbit}},[t._v("add a comment")])]),e("div",{staticClass:"content"},t._l(t.comment,(function(s,i){return e("div",{key:i,staticClass:"first"},[e("div",{staticClass:"first-img"}),e("div",{staticClass:"first-content"},[e("span",[t._v(t._s(s.cid)+": ")]),e("span",{staticClass:"first-time"},[t._v(t._s(s.ctimeStr))]),e("p",{staticClass:"first-comment"},[t._v(t._s(s.cstr))])])])})),0)]),e("div",{staticClass:"category_jj"},[e("div",{staticStyle:{color:"#0CDAEB","font-size":"1.2rem","margin-bottom":"10px"}},[t._v(" Similar Movies")]),t.statusl?e("div",{staticClass:"content"},t._l(t.tj,(function(s){return e("div",{key:s,staticClass:"content_movie",attrs:{index:s},on:{click:function(e){return t.omovie(s)}}},[e("div",{staticStyle:{width:"156px",height:"320px"}},[e("el-image",{staticStyle:{width:"156px",height:"228px"},attrs:{src:s.imageSrc1,fit:t.fit}}),e("div",{staticStyle:{width:"156px","margin-bottom":"10px",height:"15px"}},[e("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(s.title))])]),e("div",{staticStyle:{width:"156px","margin-top":"5px",height:"15px"}},[e("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(s.year))])])],1)])})),0):t._e()]),e("div",{staticClass:"category_jj"},[e("div",{staticStyle:{color:"#0CDAEB","font-size":"1.2rem","margin-bottom":"10px"}},[t._v(" Recommendation movie")]),t.statusl?e("div",{staticClass:"content"},t._l(t.xs,(function(s){return e("div",{key:s,staticClass:"content_movie",attrs:{index:s},on:{click:function(e){return t.omovie(s)}}},[e("div",{staticStyle:{width:"156px",height:"320px"}},[e("el-image",{staticStyle:{width:"156px",height:"228px"},attrs:{src:s.imageSrc1,fit:t.fit}}),e("div",{staticStyle:{width:"156px","margin-bottom":"10px",height:"15px"}},[e("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(s.title))])]),e("div",{staticStyle:{width:"156px","margin-top":"5px",height:"15px"}},[e("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(s.year))])])],1)])})),0):t._e()])])}),X=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-top":"5px"}},[e("span",{staticStyle:{"font-size":"1rem",color:"#efa485"}},[t._v("runtime")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-top":"5px"}},[e("span",{staticStyle:{"font-size":"1rem",color:"#efa485"}},[t._v("category")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-top":"5px"}},[e("span",{staticStyle:{"font-size":"1rem",color:"#efa485"}},[t._v("vote count")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{display:"inline-block","margin-right":"80px"}},[e("div",{staticStyle:{"margin-top":"5px"}},[e("span",{staticStyle:{"font-size":"1rem",color:"#efa485"}},[t._v("source")])]),e("div",{staticStyle:{"margin-top":"10px"}},[e("span",{staticStyle:{"font-size":"1rem",color:"#77b8e8"}},[t._v("themoviedb")])])])}],tt={components:{},data:function(){return{hearfs:"",firstComments:"",sj:null,xs:null,cid:"",tj:null,star:0,statusl:!0,comment:[],movieid:"",sjs:""}},created:function(){var t=this;c.$on("xg",(function(e){t.sj=e,t.hearfs="https://www.youtube.com/watch?v="+e.hearf,t.comment=e.comment,t.movieid=e.movieid,console.log(t.comment);var s=t.gettoken();t.cid=s||"Not logged in"}))},beforeDestroy:function(){this.send()},mounted:function(){this.gettjxs()},methods:{omovie:function(t){console.log("这里是打印",t),this.sjs=t,this.sjs.names=this.cid,console.log("这里是打印",this.sjs),this.$router.push("/mdetails2")},send:function(){c.$emit("xgg",this.sjs)},gettjxs:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=window.sessionStorage.getItem("uid"),t.next=3,this.$http.get("/api/ratings/lb?mid="+this.movieid+"&uid="+e);case 3:s=t.sent,i=s.data,console.log("123",i),this.tj=i.obj.tj,this.xs=i.obj.xs,this.star=i.obj.star;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),sumbit:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(this.firstComments),e=this.gettoken(),!e){t.next=6;break}""!=this.firstComments?(s={cid:e,ctimeStr:new Date,cstr:this.firstComments},this.comment.unshift(s),s.mid=this.movieid,this.$http.post("/api/ratings/sumbit",s),this.$message.success("Thanks for participating, comment success!"),this.firstComments=""):this.$message.error("You cannot enter an empty comment!"),t.next=7;break;case 6:return t.abrupt("return",this.$message.error("Please login to your account before Posting comments!"));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),starf:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(this.star),e=this.gettoken(),console.log(e),!e){t.next=14;break}return this.sj.star=this.star,this.sj.cid=e,this.sj.uid=window.sessionStorage.getItem("uid"),t.next=9,this.$http.post("/api/ratings/jsData",this.sj);case 9:s=t.sent,s.data,this.$message.success("Thank you for your participation. Score success:"+this.star+"Mark"),t.next=15;break;case 14:return t.abrupt("return",this.$message.error("Please log in your account first before you can score!"));case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),gettoken:function(){return window.sessionStorage.getItem("token")}}},et=tt,st=(s("b361"),Object(p["a"])(et,K,X,!1,null,"7ed317a0",null)),it=st.exports,rt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Box"},[e("div",{staticClass:"category"},[e("div",{staticClass:"box_white"},[e("div",[e("div",{staticClass:"hn"},[e("el-image",{staticStyle:{width:"500px",height:"280px"},attrs:{src:t.sj.imageSrc2}})],1),e("div",{staticClass:"hn"},[e("div",{staticStyle:{"margin-bottom":"10px"}},[e("span",{staticStyle:{"font-size":"2rem"}},[t._v(t._s(t.sj.name))])]),e("div",{staticStyle:{"margin-top":"5px"}},[e("el-rate",{on:{change:t.starf},model:{value:t.star,callback:function(e){t.star=e},expression:"star"}})],1),e("div",[e("div",{staticStyle:{display:"inline-block","margin-right":"80px"}},[t._m(0),e("div",{staticStyle:{"margin-top":"10px"}},[e("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(t.sj.runtime))])])]),e("div",{staticStyle:{display:"inline-block","margin-right":"80px"}},[t._m(1),e("div",{staticStyle:{"margin-top":"10px"}},t._l(t.sj.mtypeLis,(function(s){return e("span",{key:s,staticStyle:{"font-size":"0.9rem",color:"#77b8e8"},attrs:{index:s}},[t._v(t._s(s)+"\n                ")])})),0)])]),e("div",{staticStyle:{"margin-top":"15px"}},[e("div",{staticStyle:{display:"inline-block","margin-right":"80px"}},[t._m(2),e("div",{staticStyle:{"margin-top":"10px"}},[e("span",{staticStyle:{"font-size":"1rem"}},[t._v(t._s(t.sj.voteCount))])])]),t._m(3)])])])])]),e("div",{staticClass:"category_jj"},[t._v(t._s(t.sj.jj))]),e("div",{staticClass:"category_jj"},[e("div",{staticClass:"head"},[e("div",{staticStyle:{"font-size":"20px",position:"absolute",top:"15px",left:"2px"}},[t._v(t._s(this.cid)+":")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.firstComments,expression:"firstComments"}],staticStyle:{"margin-left":"25px"},attrs:{type:"text",placeholder:"Please enter a comment.."},domProps:{value:t.firstComments},on:{input:function(e){e.target.composing||(t.firstComments=e.target.value)}}}),e("button",{on:{click:t.sumbit}},[t._v("add a comment")])]),e("div",{staticClass:"content"},t._l(t.comment,(function(s,i){return e("div",{key:i,staticClass:"first"},[e("div",{staticClass:"first-img"}),e("div",{staticClass:"first-content"},[e("span",[t._v(t._s(s.cid)+": ")]),e("span",{staticClass:"first-time"},[t._v(t._s(s.ctimeStr))]),e("p",{staticClass:"first-comment"},[t._v(t._s(s.cstr))])])])})),0)])])},nt=[function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-top":"5px"}},[e("span",{staticStyle:{"font-size":"1rem",color:"#efa485"}},[t._v("runtime")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-top":"5px"}},[e("span",{staticStyle:{"font-size":"1rem",color:"#efa485"}},[t._v("category")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{"margin-top":"5px"}},[e("span",{staticStyle:{"font-size":"1rem",color:"#efa485"}},[t._v("vote count")])])},function(){var t=this,e=t._self._c;return e("div",{staticStyle:{display:"inline-block","margin-right":"80px"}},[e("div",{staticStyle:{"margin-top":"5px"}},[e("span",{staticStyle:{"font-size":"1rem",color:"#efa485"}},[t._v("source")])]),e("div",{staticStyle:{"margin-top":"10px"}},[e("span",{staticStyle:{"font-size":"1rem",color:"#77b8e8"}},[t._v("themoviedb")])])])}],at={components:{},data:function(){return{hearfs:"",firstComments:"",sj:null,xs:null,cid:"",tj:null,star:0,statusl:!0,comment:[],movieid:""}},created:function(){var t=this;c.$on("xgg",(function(e){t.sj=e,t.cid=e.names}))},mounted:function(){this.getinit()},methods:{getinit:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=window.sessionStorage.getItem("uid"),t.next=3,this.$http.get("/api/ratings/getxk?cid="+e+"&mid="+this.sj.movieid);case 3:s=t.sent,i=s.data,this.star=i.obj.star.star,this.comment=i.obj.comments,console.log("res",i);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),gettjxs:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=window.sessionStorage.getItem("uid"),t.next=3,this.$http.get("/api/ratings/lb?mid="+this.movieid+"&uid="+e);case 3:s=t.sent,i=s.data,console.log("123",i),this.tj=i.obj.tj,this.xs=i.obj.xs,this.star=i.obj.star;case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),sumbit:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(this.firstComments),e=window.sessionStorage.getItem("uid"),s=this.gettoken(),!s){t.next=7;break}""!=this.firstComments?(i={uid:e,cid:this.cid,ctimeStr:new Date,cstr:this.firstComments},this.comment.unshift(i),i.mid=this.sj.movieid,this.$http.post("/api/ratings/sumbit",i),this.$message.success("Thanks for participating, comment success!"),this.firstComments=""):this.$message.error("You cannot enter an empty comment!"),t.next=8;break;case 7:return t.abrupt("return",this.$message.error("Please login to your account before Posting comments!"));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),starf:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(console.log(this.star),e=this.gettoken(),console.log(e),!e){t.next=14;break}return this.sj.star=this.star,this.sj.cid=e,this.sj.uid=window.sessionStorage.getItem("uid"),t.next=9,this.$http.post("/api/ratings/jsData",this.sj);case 9:s=t.sent,s.data,this.$message.success("Thank you for your participation. Score success:"+this.star+"Mark"),t.next=15;break;case 14:return t.abrupt("return",this.$message.error("Please log in your account first before you can score!"));case 15:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),gettoken:function(){return window.sessionStorage.getItem("token")}}},ot=at,lt=(s("c0fd"),Object(p["a"])(ot,rt,nt,!1,null,"a00178c4",null)),ct=lt.exports,ut=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Box"},[t._m(0),e("div",{staticClass:"content"},t._l(t.movieList,(function(s,i){return e("div",{key:i,staticClass:"content_movie",attrs:{index:s}},[e("div",[e("div",{staticClass:"category"},[e("div",{staticClass:"box_white"},[e("div",[e("div",{staticClass:"hn",staticStyle:{width:"500px",height:"280px"}},[e("el-image",{attrs:{src:s.imagesrc2}})],1),e("div",{staticClass:"hn"},[e("div",{staticStyle:{"margin-bottom":"10px"}},[e("span",{staticStyle:{"font-size":"3rem"}},[t._v(t._s(s.name))])]),e("div",{staticStyle:{"margin-top":"5px"}},[e("el-rate",{attrs:{"show-text":""},on:{change:t.starf},model:{value:s.star,callback:function(e){t.$set(s,"star",e)},expression:"item.star"}})],1),e("div",{staticClass:"category_jj",staticStyle:{width:"500px"}},[t._v("\n                  "+t._s(s.jj)+"\n                ")])]),e("div",{staticStyle:{float:"right","margin-left":"50px"}},[e("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.deletM(s)}}},[t._v("删除")])],1)])])])])])})),0)])},mt=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"category"},[e("div",{staticClass:"centero"},[e("span",[t._v("历史评分区")])])])}],pt=(s("ac6a"),{data:function(){return{iconColor:"#ffb24e",category_right_status:!1,movieList:[]}},mounted:function(){this.init()},methods:{deletM:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(e){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("deletM",e),t.next=3,this.$http.get("/api/ratings/deletM?id="+e.id);case 3:s=t.sent,s.data,this.init();case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),starf:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(this.star);case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),init:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(this.star),e=window.sessionStorage.getItem("uid"),t.next=4,this.$http.post("/api/ratings/like",{name:e});case 4:s=t.sent,i=s.data,this.movieList=i.obj,this.movieList.forEach((function(t){var e=parseInt(t.star);t.star=e})),console.log(this.movieList);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),youlike:function(){console.log("你的喜欢")},omovie:function(t){console.log(t)},category_rightf:function(){this.category_right_status=!this.category_right_status},mtypef:function(){this.sleep(300),this.category_rightf()},sleep:function(t){var e=new Date,s=e.getTime()+t;while(1)if(e=new Date,e.getTime()>s)return!0}}}),dt=pt,ft=(s("be7e"),Object(p["a"])(dt,ut,mt,!1,null,"6d4439a4",null)),gt=ft.exports,ht=function(){var t=this,e=t._self._c;return e("div",{staticClass:"Box"},[e("div",{staticClass:"like"},[e("div",{staticClass:"like1"},[t._v("welcome!")]),e("div",{staticClass:"like2"},[t._v("Welcome to choose your favorite kind!")]),e("div",{staticClass:"like3"},[t._v("There are 20 categories:")]),e("div",{staticClass:"like3"},[e("div",{staticStyle:{display:"inline-block"}},[t._v("你的选择:"+t._s(t.xz))]),e("div",{staticStyle:{display:"inline-block","margin-left":"20px"}},[e("el-button",{attrs:{type:"success",round:"",size:"small"},on:{click:t.bcxq}},[t._v("保存兴趣")])],1)]),e("div",[e("div",t._l(t.types,(function(s){return e("div",{key:s,staticClass:"xbox"},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[e("span",[t._v(t._s(s.title))]),e("el-button",{staticStyle:{float:"right"},attrs:{type:"text"},on:{click:function(e){return t.xqf(s)}}},[e("i",{staticClass:"el-icon-circle-plus-outline",style:{color:s.color}})])],1),e("div",{staticStyle:{float:"left"}},[e("el-image",{staticStyle:{width:"100px",height:"135px"},attrs:{src:s.url,fit:"fit"}})],1),e("div",{staticStyle:{float:"left","margin-left":"20px"}},[e("div",{staticStyle:{width:"100px"}},[t._v(t._s(s.name))])])])],1)})),0)])])])},vt=[],bt={data:function(){return{url:"https://image.tmdb.org/t/p/w500/aipiU6YQlClnSkQlbSm7Wm7n7qc.jpg",iconColor:"#ffb24e",category_right_status:!1,types:[{url:"https://image.tmdb.org/t/p/w500/aipiU6YQlClnSkQlbSm7Wm7n7qc.jpg",name:"Animation",title:"忠犬八公",color:"#66B1FF"},{url:"https://image.tmdb.org/t/p/w500/aipiU6YQlClnSkQlbSm7Wm7n7qc.jpg",name:"Animation2",title:"忠犬八公2",color:"#66B1FF"}],xz:[]}},mounted:function(){this.getxh()},methods:{getxh:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=window.sessionStorage.getItem("token"),t.next=3,this.$http.get("/api/ratings/getxh?cid="+e);case 3:s=t.sent,i=s.data,this.types=i.obj.types,this.xz=i.obj.xz;case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),bcxq:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,s,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=window.sessionStorage.getItem("token"),s={xh:this.xz,cid:e},t.next=4,this.$http.post("/api/user/xh?",s);case 4:return i=t.sent,r=i.data,console.log(r),t.abrupt("return",this.$message.success("喜好选择成功!"));case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),xqf:function(t){if("red"===t.color){t.color="#66B1FF";var e=t.title;this.xz.splice(this.xz.indexOf(e),1);for(var s=0;s<this.xz.length;s++)this.xz[s]}else{t.color="red";var i=t.title;if(0==this.xz.length)this.xz.push(i);else for(var r=0;r<this.xz.length;r++){var n=this.xz[r];if(console.log("name",this.xz[r]),n===i)break;r==this.xz.length-1&&this.xz.push(i)}}}}},yt=bt,xt=(s("1e29"),Object(p["a"])(yt,ht,vt,!1,null,"374c4d2a",null)),_t=xt.exports,wt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"category"},[e("div",{staticClass:"left_box"},[e("div",{staticClass:"banner"},[e("div",{staticClass:"w"},[e("div",{staticClass:"subnav"},[e("ul",[e("a",{attrs:{href:"#"}},[e("li",{class:{bg:1===t.time},on:{click:function(e){return t.gcolor(1)}}},[t._v("Account setting")])]),e("a",{attrs:{href:"#"}},[e("li",{class:{bg:2===t.time},on:{click:function(e){return t.gcolor(2)}}},[t._v("Change password")])]),e("a",{attrs:{href:"#"}},[e("li",{class:{bg:3===t.time},on:{click:function(e){return t.gcolor(3)}}},[t._v("Delete a ccount")])])])])])])]),e("div",{staticClass:"rght_box"},[1==t.time?e("div",{staticClass:"rght_box2"},[t._m(0),e("br"),e("el-form",{attrs:{"label-position":t.labelPosition,"label-width":"140px",model:t.formLabelAlign}},[e("el-form-item",{attrs:{label:"Email"}},[e("el-input",{model:{value:t.formLabelAlign.Email,callback:function(e){t.$set(t.formLabelAlign,"Email",e)},expression:"formLabelAlign.Email"}})],1),e("el-form-item",{attrs:{label:"UserName"}},[e("el-input",{model:{value:t.formLabelAlign.UserName,callback:function(e){t.$set(t.formLabelAlign,"UserName",e)},expression:"formLabelAlign.UserName"}})],1),e("el-form-item",{attrs:{label:""}},[e("el-button",{on:{click:t.UpdateU}},[t._v("Update")])],1)],1)],1):t._e(),2==t.time?e("div",{staticClass:"rght_box2"},[t._m(1),e("br"),e("el-form",{attrs:{"label-position":t.labelPosition,"label-width":"140px",model:t.formLabelAlign}},[e("el-form-item",{attrs:{label:"Original password"}},[e("el-input",{model:{value:t.formLabelAlign.oPassword,callback:function(e){t.$set(t.formLabelAlign,"oPassword",e)},expression:"formLabelAlign.oPassword"}})],1),e("el-form-item",{attrs:{label:"Password"}},[e("el-input",{model:{value:t.formLabelAlign.Password,callback:function(e){t.$set(t.formLabelAlign,"Password",e)},expression:"formLabelAlign.Password"}})],1),e("el-form-item",{attrs:{label:"Retype Password","label-width":"140px"}},[e("el-input",{model:{value:t.formLabelAlign.Retype,callback:function(e){t.$set(t.formLabelAlign,"Retype",e)},expression:"formLabelAlign.Retype"}})],1),e("el-form-item",{attrs:{label:""}},[e("el-button",{on:{click:t.UpdateP}},[t._v("Update")])],1)],1)],1):t._e(),3==t.time?e("div",{staticClass:"rght_box2"},[t._m(2),t._m(3),e("br"),e("el-button",{attrs:{type:"danger"},on:{click:t.deleteU}},[t._v("Update")])],1):t._e()])])},St=[function(){var t=this,e=t._self._c;return e("div",[e("span",{staticClass:"title"},[t._v("Account setting")])])},function(){var t=this,e=t._self._c;return e("div",[e("span",{staticClass:"title"},[t._v("Change your password")])])},function(){var t=this,e=t._self._c;return e("div",[e("span",{staticClass:"title"},[t._v("Delete a ccount")])])},function(){var t=this,e=t._self._c;return e("div",[e("span",[t._v("Have you thought about it? What you're going to do will delete your account, irretrievably")])])}],kt={components:{},data:function(){return{time:1,color1:"#5CAFE2",labelPosition:"right",formLabelAlign:{Email:"",UserName:"",Password:"",oPassword:"",Retype:"",id:""}}},created:function(){},mounted:function(){this.init()},methods:{gcolor:function(t){this.time=t,console.log(this.time)},init:function(){var t=JSON.parse(window.sessionStorage.getItem("user"));console.log("user",t),this.formLabelAlign.Email=t.email,this.formLabelAlign.UserName=t.username,this.formLabelAlign.id=t.id},UpdateU:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.post("/api/user/UpdateU",this.formLabelAlign);case 2:e=t.sent,s=e.data,200==s.code?this.jumplogin():this.$message.error(s.message);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),UpdateP:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.formLabelAlign.Password==this.formLabelAlign.Retype){t.next=3;break}return this.$message.error("两次输入的密码不一样"),t.abrupt("return");case 3:return t.next=5,this.$http.post("/api/user/UpdateP",this.formLabelAlign);case 5:e=t.sent,s=e.data,200==s.code?this.jumplogin():this.$message.error(s.message);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),deleteU:function(){var t=Object(l["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.post("/api/user/deleteU",this.formLabelAlign);case 2:e=t.sent,e.data,this.jumplogin();case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),jumplogin:function(){this.$message.success("账号信息更新成功,请重新登录"),window.sessionStorage.clear(),c.$emit("Update","未登录"),this.$router.push("/login")}}},jt=kt,Ct=(s("eea8"),Object(p["a"])(jt,wt,St,!1,null,"24b41aef",null)),$t=Ct.exports;i["default"].use(y["a"]);var Ft=new y["a"]({routes:[{path:"/",name:"Home",component:j},{path:"/login",name:"Login",component:L},{path:"/signup",name:"Signup",component:T},{path:"/setting",name:"Setting",component:Q},{path:"/logout",name:"Logout",component:Z},{path:"/mdetails",name:"Mdetails",component:it},{path:"/mdetails2",name:"Mdetails2",component:ct},{path:"/like",name:"Like",component:gt},{path:"/like2",name:"Like2",component:_t},{path:"/change",name:"Change",component:$t}]}),zt=s("2f62");i["default"].use(zt["a"]);var Ot=new zt["a"].Store({state:{isLogin:!1,user:{}},getters:{getIsLogin:function(t){return t.isLogin||null!=localStorage.getItem("user")},getUser:function(t){return JSON.parse(localStorage.getItem("user"))},getUserId:function(t){return JSON.parse(localStorage.getItem("user")).id}},mutations:{logIn:function(t,e){t.isLogin=!0,localStorage.setItem("user",JSON.stringify({id:e.id,name:e.username,email:e.email}))},logOut:function(t){t.isLogin=!1,t.user={},localStorage.removeItem("user")}},actions:{login:function(t,e){var s=t.commit;s("logIn",e)},logout:function(t){var e=t.commit;e("logOut")}}}),Lt=s("5c96"),Rt=s.n(Lt);s("0fae");I.a.interceptors.response.use(void 0,(function(t){if(t){var e=t.config;if(401===t.response.status&&!e._retry)return e._retry=!0,Ot.dispatch("logout"),Ft.push("/login")}})),i["default"].config.productionTip=!1,i["default"].use(Rt.a),i["default"].prototype.$http=I.a,new i["default"]({router:Ft,store:Ot,render:function(t){return t(b)}}).$mount("#app")},"5bb1":function(t,e,s){},"6d8a":function(t,e,s){"use strict";s("9bbb")},7148:function(t,e,s){"use strict";s("5bb1")},"8c8a":function(t,e,s){"use strict";s("c83d")},"9bbb":function(t,e,s){},a0e2:function(t,e,s){},a763:function(t,e,s){},b361:function(t,e,s){"use strict";s("a0e2")},b52f:function(t,e,s){},bc9c:function(t,e,s){},be7e:function(t,e,s){"use strict";s("359b")},c0fd:function(t,e,s){"use strict";s("d1c3")},c83d:function(t,e,s){},d1c3:function(t,e,s){},e644:function(t,e,s){"use strict";s("a763")},eea8:function(t,e,s){"use strict";s("4ce4")}});
//# sourceMappingURL=app.0f6a8011.js.map