"use strict";(self["webpackChunkvue_sctwo"]=self["webpackChunkvue_sctwo"]||[]).push([[162],{6162:function(e,t,s){s.r(t),s.d(t,{default:function(){return c}});var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"category"},[s("div",{staticClass:"left_box"},[s("div",{staticClass:"banner"},[s("div",{staticClass:"w"},[s("div",{staticClass:"subnav"},[s("ul",[s("a",{attrs:{href:"#"}},[s("li",{class:{bg:1===e.time},on:{click:function(t){return e.gcolor(1)}}},[e._v("Account setting")])]),s("a",{attrs:{href:"#"}},[s("li",{class:{bg:2===e.time},on:{click:function(t){return e.gcolor(2)}}},[e._v("Change password")])]),s("a",{attrs:{href:"#"}},[s("li",{class:{bg:3===e.time},on:{click:function(t){return e.gcolor(3)}}},[e._v("Delete a ccount")])])])])])])]),s("div",{staticClass:"rght_box"},[1==e.time?s("div",{staticClass:"rght_box2"},[e._m(0),s("br"),s("div",[s("el-form",{attrs:{"label-position":e.labelPosition,"label-width":"140px",model:e.formLabelAlign}},[s("el-form-item",{attrs:{label:"Email"}},[s("el-input",{model:{value:e.formLabelAlign.Email,callback:function(t){e.$set(e.formLabelAlign,"Email",t)},expression:"formLabelAlign.Email"}})],1),s("el-form-item",{attrs:{label:"UserName"}},[s("el-input",{model:{value:e.formLabelAlign.UserName,callback:function(t){e.$set(e.formLabelAlign,"UserName",t)},expression:"formLabelAlign.UserName"}})],1),s("el-form-item",{attrs:{label:""}},[s("el-button",{on:{click:e.UpdateU}},[e._v("Update")])],1)],1)],1),s("div",{staticClass:"tx-box"},[s("div",[s("el-image",{staticClass:"tx-box1",staticStyle:{width:"100px",height:"100px"},attrs:{src:e.url,fit:"fit"}})],1),s("div",{staticClass:"gh-box"},[s("el-upload",{staticClass:"upload-demo",attrs:{"auto-upload":!1,action:"","on-change":e.fileChange,"on-exceed":e.exceedFile,"show-file-list":!1,"file-list":e.fileList,"list-type":"picture"}},[s("el-button",{attrs:{type:"success",plain:""}},[e._v("Change profile photo")])],1)],1)])]):e._e(),2==e.time?s("div",{staticClass:"rght_box2"},[e._m(1),s("br"),s("el-form",{attrs:{"label-position":e.labelPosition,"label-width":"140px",model:e.formLabelAlign}},[s("el-form-item",{attrs:{label:"Original password"}},[s("el-input",{model:{value:e.formLabelAlign.oPassword,callback:function(t){e.$set(e.formLabelAlign,"oPassword",t)},expression:"formLabelAlign.oPassword"}})],1),s("el-form-item",{attrs:{label:"Password"}},[s("el-input",{model:{value:e.formLabelAlign.Password,callback:function(t){e.$set(e.formLabelAlign,"Password",t)},expression:"formLabelAlign.Password"}})],1),s("el-form-item",{attrs:{label:"Retype Password","label-width":"140px"}},[s("el-input",{model:{value:e.formLabelAlign.Retype,callback:function(t){e.$set(e.formLabelAlign,"Retype",t)},expression:"formLabelAlign.Retype"}})],1),s("el-form-item",{attrs:{label:""}},[s("el-button",{on:{click:e.UpdateP}},[e._v("Update")])],1)],1)],1):e._e(),3==e.time?s("div",{staticClass:"rght_box2"},[e._m(2),e._m(3),s("br"),s("el-button",{attrs:{type:"danger"},on:{click:e.deleteU}},[e._v("Update")])],1):e._e()])])},a=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span",{staticClass:"title"},[e._v("Account setting")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span",{staticClass:"title"},[e._v("Change your password")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span",{staticClass:"title"},[e._v("Delete a ccount")])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("span",[e._v("Have you thought about it? What you're going to do will delete your account, irretrievably")])])}],l=(s(1332),{components:{},data(){return{limitNum:1,fileList:[],fits:["fill","contain","cover","none","scale-down"],url:s(7097),time:1,color1:"#5CAFE2",labelPosition:"right",formLabelAlign:{Email:"",UserName:"",Password:"",oPassword:"",Retype:"",id:""}}},created(){},mounted(){this.init()},methods:{async daqd(){var e=new FormData;if(e.append("file",this.files),!this.files)return this.$message.error("Please select a picture to upload!");let t=await this.$afuntion.httsPost("./api/ratings/upload",e);if(200==t.code){this.$message.success(t.message),this.url=t.obj;let e=JSON.parse(window.sessionStorage.getItem("admin"));e.picturel=t.obj,window.sessionStorage.setItem("admin",JSON.stringify(e))}else this.$message.error(t.message)},async fileChange(e,t){let s=e.name.split(".");if("png"!=s[1])return this.$message.error("The image format is incorrect. Please upload the png format!"),void(this.fileList=[]);this.files=e.raw,this.daqd()},exceedFile(e,t){this.$message.warning(`只能选择 ${this.limitNum} 个文件，当前共选择了 ${e.length+t.length} 个`)},gcolor(e){this.time=e,console.log(this.time)},init(){const e=JSON.parse(window.sessionStorage.getItem("admin"));this.formLabelAlign.Email=e.email,this.formLabelAlign.UserName=e.username,this.formLabelAlign.id=e.id,this.url=e.picturel},async UpdateU(){const e=await this.$afuntion.httsPost("/api/user/UpdateU",this.formLabelAlign);200==e.code?this.jumplogin():this.$message.error(e.message)},async UpdateP(){if(this.formLabelAlign.Password!=this.formLabelAlign.Retype)return void this.$message.error("The password is wrong. The password entered twice is different");const e=await this.$afuntion.httsPost("/api/user/UpdateP",this.formLabelAlign);200==e.code?this.jumplogin():this.$message.error(e.message)},async deleteU(){await this.$afuntion.httsPost("/api/user/deleteU",this.formLabelAlign);this.jumplogin()},jumplogin(){this.$message.success("The account information has been updated successfully. Please log in again!"),window.sessionStorage.clear(),this.$store.commit("cadmin"),this.$router.push("/login")}}}),o=l,r=s(1001),n=(0,r.Z)(o,i,a,!1,null,"7c7a8f52",null),c=n.exports},1332:function(e,t,s){var i=s(144);t["Z"]=new i["default"]},7097:function(e,t,s){e.exports=s.p+"img/1.ea50e96f.jpg"}}]);
//# sourceMappingURL=162.8f244465.js.map