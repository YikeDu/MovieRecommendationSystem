"use strict";(self["webpackChunkvue_sctwo"]=self["webpackChunkvue_sctwo"]||[]).push([[850],{4850:function(e,r,s){s.r(r),s.d(r,{default:function(){return d}});var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{staticClass:"login-boxma"},[s("div",{staticClass:"login-box"},[s("el-row",{attrs:{type:"flex",align:"center",justify:"center"}},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"User Name",prop:"username"}},[s("el-input",{model:{value:e.ruleForm.username,callback:function(r){e.$set(e.ruleForm,"username",r)},expression:"ruleForm.username"}})],1),s("el-form-item",{attrs:{label:"Password",prop:"password"}},[s("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"success",round:""},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("Login")])],1),s("el-form-item",[s("el-button",{attrs:{type:"success",round:""},on:{click:function(r){return e.wjma()}}},[e._v("Forget your password")])],1)],1)],1)],1),s("div",[s("el-dialog",{attrs:{title:"Forget your password",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(r){e.dialogVisible=r}}},[s("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"status-icon":"","label-width":"100px"}},[s("el-form-item",{attrs:{label:"Account",prop:"pass"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm2.zh,callback:function(r){e.$set(e.ruleForm2,"zh",r)},expression:"ruleForm2.zh"}})],1),s("el-form-item",{attrs:{label:"Email",prop:"pass"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm2.mail,callback:function(r){e.$set(e.ruleForm2,"mail",r)},expression:"ruleForm2.mail"}})],1),s("el-form-item",{attrs:{label:"Password",prop:"pass"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm2.ma,callback:function(r){e.$set(e.ruleForm2,"ma",r)},expression:"ruleForm2.ma"}})],1),s("el-form-item",{attrs:{label:"code",prop:"pass"}},[s("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm2.yzm,callback:function(r){e.$set(e.ruleForm2,"yzm",r)},expression:"ruleForm2.yzm"}})],1),s("el-form-item",[s("div",{staticStyle:{display:"flex"}},[s("el-button",{on:{click:function(r){return e.fsyzm()}}},[e._v("Verification code")]),s("el-button",{attrs:{type:"primary"},on:{click:e.xgma}},[e._v("Change password")])],1)])],1)],1)],1)])},o=[],a=s(7673),n=s(6198),l=(s(8862),s(1332)),i={name:"Login",data:function(){return{email:"",dialogVisible:!1,ruleForm2:{zh:"",mail:"",yzm:"",ma:""},ruleForm:{username:"",password:""},rules:{username:[{required:!0,message:"Please input username",trigger:"blur"},{min:4,max:32,message:"Length limited from 4 to 32 characters",trigger:"blur"}],password:[{required:!0,message:"Please input password",trigger:"blur"},{min:8,max:32,message:"Length limited from 8 to 32 characters",trigger:"blur"}]}}},beforeDestroy:function(){this.send()},methods:{send:function(){l.Z.$emit("email",this.email)},fsyzm:function(){var e=this;return(0,n.Z)((0,a.Z)().mark((function r(){var s;return(0,a.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(""!==e.ruleForm2.zh&&""!==e.ruleForm2.mail){r.next=4;break}e.$message.error("Please enter your account number and password"),r.next=8;break;case 4:return r.next=6,e.$http.post("./api/user/yzm",e.ruleForm2);case 6:s=r.sent,200==s.data.code?e.$message.success(s.data.message):e.$message.error(s.data.message);case 8:case"end":return r.stop()}}),r)})))()},xgma:function(){var e=this;return(0,n.Z)((0,a.Z)().mark((function r(){var s;return(0,a.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(""!==e.ruleForm2.zh&&""!==e.ruleForm2.mail&&""!==e.ruleForm2.yzm&&""!==e.ruleForm2.ma){r.next=4;break}e.$message.error("Please enter your account number and password"),r.next=8;break;case 4:return r.next=6,e.$http.post("./api/user/xgma",e.ruleForm2);case 6:s=r.sent,200==s.data.code?(e.$message.success("ok!The verification code is sent successfully. Procedure!"),e.$message.success(s.data.message)):e.$message.error(s.data.message);case 8:case"end":return r.stop()}}),r)})))()},wjma:function(){this.dialogVisible=!0},httpMb:function(){var e=this;return(0,n.Z)((0,a.Z)().mark((function r(){return(0,a.Z)().wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.tableData=res.obj;case 1:case"end":return r.stop()}}),r)})))()},submitForm:function(e){var r=this;return(0,n.Z)((0,a.Z)().mark((function e(){var s;return(0,a.Z)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.$afuntion.httsPost("/api/user/login",r.ruleForm);case 2:s=e.sent,200==s.code?(window.sessionStorage.setItem("token",r.ruleForm.username),window.sessionStorage.setItem("admin",JSON.stringify(s.obj)),window.sessionStorage.setItem("username",s.obj.username),window.sessionStorage.setItem("cid",s.obj.id),window.sessionStorage.setItem("email",s.obj.email),r.$message.success("login successfully"),l.Z.$emit("login",s.obj),r.$store.commit("admin",s.obj),r.$router.push("/HomePage"),r.email=s.obj.email,r.send(),r.$store.commit("cadmin2")):r.$message.error("The account or password is incorrect");case 4:case"end":return e.stop()}}),e)})))()}}},u=i,m=s(1001),c=(0,m.Z)(u,t,o,!1,null,"323f7f01",null),d=c.exports},1332:function(e,r,s){var t=s(144);r["Z"]=new t["default"]}}]);
//# sourceMappingURL=850-legacy.73d7c894.js.map