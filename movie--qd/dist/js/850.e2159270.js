"use strict";(self["webpackChunkvue_sctwo"]=self["webpackChunkvue_sctwo"]||[]).push([[850],{4850:function(e,s,r){r.r(s),r.d(s,{default:function(){return n}});var t=function(){var e=this,s=e.$createElement,r=e._self._c||s;return r("div",{staticClass:"login-boxma"},[r("div",{staticClass:"login-box"},[r("el-row",{attrs:{type:"flex",align:"center",justify:"center"}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"User Name",prop:"username"}},[r("el-input",{model:{value:e.ruleForm.username,callback:function(s){e.$set(e.ruleForm,"username",s)},expression:"ruleForm.username"}})],1),r("el-form-item",{attrs:{label:"Password",prop:"password"}},[r("el-input",{attrs:{type:"password"},model:{value:e.ruleForm.password,callback:function(s){e.$set(e.ruleForm,"password",s)},expression:"ruleForm.password"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"success",round:""},on:{click:function(s){return e.submitForm("ruleForm")}}},[e._v("Login")])],1),r("el-form-item",[r("el-button",{attrs:{type:"success",round:""},on:{click:function(s){return e.wjma()}}},[e._v("Forget your password")])],1)],1)],1)],1),r("div",[r("el-dialog",{attrs:{title:"Forget your password",visible:e.dialogVisible,width:"30%","before-close":e.handleClose},on:{"update:visible":function(s){e.dialogVisible=s}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm2,"status-icon":"","label-width":"100px"}},[r("el-form-item",{attrs:{label:"Account",prop:"pass"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm2.zh,callback:function(s){e.$set(e.ruleForm2,"zh",s)},expression:"ruleForm2.zh"}})],1),r("el-form-item",{attrs:{label:"Email",prop:"pass"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm2.mail,callback:function(s){e.$set(e.ruleForm2,"mail",s)},expression:"ruleForm2.mail"}})],1),r("el-form-item",{attrs:{label:"Password",prop:"pass"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm2.ma,callback:function(s){e.$set(e.ruleForm2,"ma",s)},expression:"ruleForm2.ma"}})],1),r("el-form-item",{attrs:{label:"code",prop:"pass"}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.ruleForm2.yzm,callback:function(s){e.$set(e.ruleForm2,"yzm",s)},expression:"ruleForm2.yzm"}})],1),r("el-form-item",[r("div",{staticStyle:{display:"flex"}},[r("el-button",{on:{click:function(s){return e.fsyzm()}}},[e._v("Verification code")]),r("el-button",{attrs:{type:"primary"},on:{click:e.xgma}},[e._v("Change password")])],1)])],1)],1)],1)])},o=[],a=r(1332),i={name:"Login",data(){return{email:"",dialogVisible:!1,ruleForm2:{zh:"",mail:"",yzm:"",ma:""},ruleForm:{username:"",password:""},rules:{username:[{required:!0,message:"Please input username",trigger:"blur"},{min:4,max:32,message:"Length limited from 4 to 32 characters",trigger:"blur"}],password:[{required:!0,message:"Please input password",trigger:"blur"},{min:8,max:32,message:"Length limited from 8 to 32 characters",trigger:"blur"}]}}},beforeDestroy(){this.send()},methods:{send(){a.Z.$emit("email",this.email)},async fsyzm(){if(""===this.ruleForm2.zh||""===this.ruleForm2.mail)this.$message.error("Please enter your account number and password");else{let e=await this.$http.post("./api/user/yzm",this.ruleForm2);200==e.data.code?this.$message.success(e.data.message):this.$message.error(e.data.message)}},async xgma(){if(""===this.ruleForm2.zh||""===this.ruleForm2.mail||""===this.ruleForm2.yzm||""===this.ruleForm2.ma)this.$message.error("Please enter your account number and password");else{let e=await this.$http.post("./api/user/xgma",this.ruleForm2);200==e.data.code?(this.$message.success("ok!The verification code is sent successfully. Procedure!"),this.$message.success(e.data.message)):this.$message.error(e.data.message)}},wjma(){this.dialogVisible=!0},async httpMb(){this.tableData=res.obj},async submitForm(e){const s=await this.$afuntion.httsPost("/api/user/login",this.ruleForm);200==s.code?(window.sessionStorage.setItem("token",this.ruleForm.username),window.sessionStorage.setItem("admin",JSON.stringify(s.obj)),window.sessionStorage.setItem("username",s.obj.username),window.sessionStorage.setItem("cid",s.obj.id),window.sessionStorage.setItem("email",s.obj.email),this.$message.success("login successfully"),a.Z.$emit("login",s.obj),this.$store.commit("admin",s.obj),this.$router.push("/HomePage"),this.email=s.obj.email,this.send(),this.$store.commit("cadmin2")):this.$message.error("The account or password is incorrect")}}},l=i,m=r(1001),u=(0,m.Z)(l,t,o,!1,null,"323f7f01",null),n=u.exports},1332:function(e,s,r){var t=r(144);s["Z"]=new t["default"]}}]);
//# sourceMappingURL=850.e2159270.js.map